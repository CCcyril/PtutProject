{% extends "::conferenceBase.html.twig" %}
{% block headband %}
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        WTF
    </button>
    {% block headbandTitle %}
        <h1 contenteditable="true" id="headbandTitle">{{ parent() }}</h1>
    {% endblock %}

    {% block headbandText %}
        <span contenteditable="true" id="headbandText">{{ parent() }}</span>
    {% endblock %}
{% endblock %}

{% block menuItemTitle %}
    {#<a href="{{ path('cgg_conference_adminConference',{'idConference':conference.id, 'idPage':menuItem.page.id}) }}" id="menuItemTitle{{ loop.index }}">{{ parent() }}</a>#}
    <button id="menuItemTitle{{ loop.index }}">{{ parent() }}</button>
{% endblock %}

{% block addMenuItem %}
    <li><a href="{{ path('cgg_conference_admin_addMenuItem', {'idConference':conference.id}) }}"><span class="glyphicon glyphicon-plus"></span></a></li>
{% endblock %}

{% block contentText %}
    <div contenteditable="true" id="content{{ loop.index }}">
        {{ parent() }}
    </div>
{% endblock %}

{% block footerText %}
    <p contenteditable="true" id="footerText">{{ parent() }}</p>
{% endblock %}

{% block body %}
    <!-- inputs cachés -->
    <input type="hidden" id="idConference" value="{{ conference.id }}">
    <input type="hidden" id="idPage" value="{{ app.request.get('idPage') }}">
    <!-- fin inputs cachés -->
    {% include 'CGGConferenceBundle:Admin/Partials:headerModal.html.twig' %}
    <button class="btn btn-success" id="saveChangesAdminConference">Valider les changements</button>
    <div id="menuItemOptions" class="hidden" style="background-color: #269abc; padding: 10px 10px;">
        <a href="/" class="btn btn-success">
            Aller à
        </a>
        <a href="/" class="btn btn-primary">
            Editer
        </a>
        <a href="/" class="btn btn-default">
            AJouter un bouton
        </a>
    </div>
{% endblock %}
{#TODO : intégrer le js dans admin.js (problème avec le routing => fosjsrouting)#}
{% block javascript %}
    {{ parent() }}
    <script>
        $(document).ready(function(){
            $("#btnAddPages").on('click', function(){
                $("#addPages").removeClass('hidden');
            });

            $("#addInput").on('click', function(){
                var lastDiv = $("#addPages form div:last");
                lastDiv.after("<div class='form-group'>" + lastDiv.html() + "</div>");
                if($("#removeInput").hasClass('disabled')){
                    $("#removeInput").removeClass('disabled');
                }
            })

            $("#removeInput").on('click', function(){
                var countInput = $("#addPages form div").length;
                if(countInput === 3){
                    $("#removeInput").addClass('disabled');
                }
                $("#addPages form div:last").remove();
            });

            $("#btnUpdateBackground").on('click', function(){
                $("#updateBackground").removeClass('hidden');
            });

            $('.demo-auto').colorpicker();
        });
    </script>
{% endblock %}

